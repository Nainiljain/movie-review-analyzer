<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Movie Review Analyzer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='Css/style.css') }}">
</head>

<body>

  <!-- HEADER -->
  <header>
    <h1><a href="/">Movie Review Analyzer</a></h1>
    <div class="search-row">
      <input id="global-search" placeholder="Search movies (TMDb)..." />
      <button id="btn-search" class="btn btn-primary" title="Search">üîç</button>
      <button id="mic-search" class="btn btn-ghost mic-btn">üé§</button>
      <button id="toggle-dark-mode" class="btn btn-ghost" title="Toggle Dark Mode">üåô</button>
    </div>
  </header>

  <!-- MOBILE FILTER TOGGLE -->
  <button id="toggle-filters" class="btn btn-secondary mobile-filter-btn" style="display:none; margin: 1rem;">Show
    Filters</button>

  <!-- MAIN LAYOUT -->
  <main>
    <!-- LEFT: Filters -->
    <section class="left" id="filters-section">
      <div class="filters-container">
        <h2>Movie Filters</h2>
        <div class="filter-row">
          <label>Genre:</label>
          <select id="filter-genre">
            <option value="">All</option>
            {% for g in genres %}
            <option value="{{ g.id }}">{{ g.name }}</option>
            {% endfor %}
          </select>

          <label>Year:</label>
          <input id="filter-year" type="number" placeholder="2024" min="1900" max="2100" />

          <label>Min Rating:</label>
          <input id="filter-rating" type="number" step="0.1" min="0" max="10" placeholder="7.5" />

          <button id="apply-movie-filters" class="btn btn-primary" style="margin-top: 10px;">Apply</button>
        </div>

        <h2>Review Filters</h2>
        <div class="filter-row">
          <label>Sentiment:</label>
          <select id="filter-sentiment">
            <option value="">All</option>
            <option value="positive">Positive</option>
            <option value="neutral">Neutral</option>
            <option value="negative">Negative</option>
          </select>

          <label>Date:</label>
          <select id="filter-date">
            <option value="desc">Newest First</option>
            <option value="asc">Oldest First</option>
          </select>

          <label>Min Words:</label>
          <input id="filter-min-words" type="number" min="0" placeholder="0" />

          <button id="apply-review-filters" class="btn btn-primary" style="margin-top: 10px;">Apply Reviews</button>
        </div>

        <h2>Quick Search in Results</h2>
        <input id="filter-search" placeholder="Filter visible results by title..." />
      </div>
    </section>

    <!-- CENTER: Movies -->
    <section class="center">
      <h2>Movies</h2>
      <div id="movie-results" class="cards-grid">
        <!-- Movies injected here -->
      </div>
    </section>

    <!-- RIGHT: Review History -->
    <aside class="right">
      <div class="card" style="padding: 1.5rem;">
        <h2>Analytics</h2>
        <div id="analytics-section">
          <canvas id="sentiment-chart" width="200" height="200"></canvas>
          <div id="wordcloud-container" style="margin-top: 20px; text-align: center;">
            <h4 style="margin-bottom: 10px;">Word Cloud</h4>
            <img id="wordcloud-img" style="max-width: 100%; border-radius: 8px;" alt="Word Cloud not available" />
          </div>
          <div style="margin-top: 15px; text-align: center;">
            <a href="/api/export_csv" class="btn btn-success btn-export">Download CSV</a>
          </div>
        </div>
      </div>

      <div class="card" style="padding: 1.5rem;">
        <h2>Add a Review</h2>
        <div class="add-review">
          <input id="review-movie-title" placeholder="Movie title" />
          <textarea id="review-text" placeholder="Write your review..." rows="3"></textarea>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="mic-review" class="btn btn-ghost mic-btn">üé§</button>
            <button id="btn-add-review" class="btn btn-primary" style="flex: 1;">Submit Review</button>
          </div>
        </div>
      </div>

      <div id="review-history"></div>
    </aside>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{{ url_for('static', filename='Js/script.js') }}"></script>
</body>

</html>